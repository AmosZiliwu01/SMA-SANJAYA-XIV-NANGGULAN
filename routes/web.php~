<?php

use App\Http\Controllers\backend\ActivityLogController;
use App\Http\Controllers\backend\AgendaController;
use App\Http\Controllers\backend\AnnouncementController;
use App\Http\Controllers\backend\AuthController;
use App\Http\Controllers\backend\CategoryController;
use App\Http\Controllers\backend\ClassController;
use App\Http\Controllers\backend\CommentController;
use App\Http\Controllers\backend\DashboardController;
use App\Http\Controllers\backend\FileController;
use App\Http\Controllers\backend\GalleryController;
use App\Http\Controllers\backend\MessageController;
use App\Http\Controllers\backend\PostController;
use App\Http\Controllers\backend\StudentController;
use App\Http\Controllers\backend\TeacherController;
use App\Http\Controllers\backend\TestimonialController;
use App\Http\Controllers\backend\UserController;
use App\Http\Controllers\backend\VisitorController;
use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider and all of them will
| be assigned to the "web" middleware group. Make something great!
|
*/

/*Frontend Routes*/
Route::prefix('/')->group(function () {

});

/*Backend Routes*/
Route::prefix('dashboard')->middleware('auth')->group(function () {
    //Dashboard Routes
    Route::get('/', [DashboardController::class, 'index'])->name('dashboard.index');

    //User Routes
    Route::prefix('user')->middleware('role:administrator')->group(function () {
        Route::get('/', [UserController::class, 'index'])->name('user.index');
        Route::post('/store', [UserController::class, 'store'])->name('user.store');
        Route::put('/update/{id}', [UserController::class, 'update'])->name('user.update');
        Route::put('/reset-password/{id}', [UserController::class, 'resetPassword'])->name('user.resetPassword');
        Route::delete('/destroy/{user}', [UserController::class, 'destroy'])->name('user.destroy');
    });

    //Activity Log Routes
    Route::prefix('activity-log')->group(function () {
        Route::get('/', [ActivityLogController::class, 'index'])->name('activity-log.index');
    });

    //Agenda Routes
    Route::prefix('agenda')->group(function () {
        Route::get('/', [AgendaController::class, 'index'])->name('agenda.index');
        Route::post('/store', [AgendaController::class, 'store'])->name('agenda.store');
        Route::put('/update/{id}', [AgendaController::class, 'update'])->name('agenda.update');
        Route::delete('/destroy/{id}', [AgendaController::class, 'destroy'])->name('agenda.destroy');
    });

    //Announcement
    Route::prefix('announcement')->group(function () {
        Route::get('/', [AnnouncementController::class, 'index'])->name('announcement.index');
        Route::post('/store', [AnnouncementController::class, 'store'])->name('announcement.store');
        Route::put('/update{announcement}', [AnnouncementController::class, 'update'])->name('announcement.update');
        Route::delete('/destroy{announcement}', [AnnouncementController::class, 'destroy'])->name('announcement.destroy');
    });

    //Category Routes
    Route::prefix('category')->group(function () {
        Route::get('/', [CategoryController::class, 'index'])->name('category.index');
        Route::post('/store', [CategoryController::class, 'store'])->name('category.store');
        Route::put('/update/{id}', [CategoryController::class, 'update'])->name('category.update');
        Route::delete('/destroy/{id}', [CategoryController::class, 'destroy'])->name('category.destroy')->middleware('role:administrator');
    });

    //Class Routes
    Route::prefix('class')->middleware('role:administrator')->group(function () {
        Route::get('/', [ClassController::class, 'index'])->name('class.index');
        Route::post('/store', [ClassController::class, 'store'])->name('class.store');
        Route::get('/edit/{class}', [ClassController::class, 'edit'])->name('class.edit');
        Route::put('/update/{class}', [ClassController::class, 'update'])->name('class.update');
        Route::delete('/destroy/{class}', [ClassController::class, 'destroy'])->name('class.destroy');
    });

    //Comment Routes
    Route::prefix('comment')->group(function () {
        Route::get('/', [CommentController::class, 'index'])->name('comment.index');
    });

    //File Routes
    Route::prefix('file')->group(function () {
        Route::get('/', [FileController::class, 'index'])->name('file.index');
    });

    //Gallery Routes
    Route::prefix('gallery')->group(function () {
        Route::get('/', [GalleryController::class, 'index'])->name('gallery.index');
        Route::post('/store', [GalleryController::class, 'store'])->name('gallery.store');
        Route::put('/update/{id}', [GalleryController::class, 'update'])->name('gallery.update');
        Route::delete('/destroy/{id}', [GalleryController::class, 'destroy'])->name('gallery.destroy');
        });

    //Message Routes
    Route::prefix('message')->group(function () {
        Route::get('/', [MessageController::class, 'index'])->name('message.index');
    });

    //Post Routes
    Route::prefix('post')->group(function () {
        Route::get('/', [PostController::class, 'index'])->name('post.index');
        Route::get('/create', [PostController::class, 'create'])->name('post.create');
        Route::post('/store', [PostController::class, 'store'])->name('post.store');
        Route::get('/edit/{id}', [PostController::class, 'edit'])->name('post.edit');
        Route::put('/update/{id}', [PostController::class, 'update'])->name('post.update');
        Route::delete('/destroy/{id}', [PostController::class, 'destroy'])->name('post.destroy');
        Route::post('/ckeditor/upload', [PostController::class, 'uploadImage'])->name('ckeditor.upload');
    });

    //Student Routes
    Route::prefix('student')->middleware('role:administrator')->group(function () {
        Route::get('/', [StudentController::class, 'index'])->name('student.index');
        Route::get('/create', [StudentController::class, 'create'])->name('student.create');
        Route::post('/store', [StudentController::class, 'store'])->name('student.store');
        Route::post('/{student}', [StudentController::class, 'update'])->name('student.update');
        Route::delete('/{student}', [StudentController::class, 'destroy'])->name('student.destroy');
        Route::get('/export', [StudentController::class, 'export'])->name('student.export');
        Route::post('/student/import', [StudentController::class, 'import'])->name('student.import');

    });

    //Teacher Routes
    Route::prefix('teachers')->middleware('role:administrator')->group(function () {
        Route::get('/', [TeacherController::class, 'index'])->name('teachers.index');
        Route::post('/store', [TeacherController::class, 'store'])->name('teachers.store');
        Route::post('/update/{teachers}', [TeacherController::class, 'update'])->name('teachers.update');
        Route::post('/destroy/{teachers}', [TeacherController::class, 'destroy'])->name('teachers.destroy');
        Route::get('/export', [TeacherController::class, 'export'])->name('teachers.export');
        Route::post('/import', [TeacherController::class, 'import'])->name('teachers.import');
    });

    //Testimonial Routes
    Route::prefix('testimonial')->middleware('role:administrator')->group(function () {
        Route::get('/', [TestimonialController::class, 'index'])->name('testimonial.index');
        Route::post('/store', [TestimonialController::class, 'store'])->name('testimonial.store');
        Route::put('/update/{testimonial}', [TestimonialController::class, 'update'])->name('testimonial.update');
        Route::delete('/destroy/{testimonial}', [TestimonialController::class, 'destroy'])->name('testimonial.destroy');
    });

    //Visitor Routes
    Route::prefix('visitor')->group(function () {
        Route::get('/', [VisitorController::class, 'index'])->name('visitor.index');
    });
});

/* Auth Routes */
Route::prefix('auth')->group(function () {
    // Login
    Route::get('/login', [AuthController::class, 'index'])->name('auth.login');
    Route::post('/login', [AuthController::class, 'login'])->name('auth.login.submit');

    // Logout
    Route::get('/logout', [AuthController::class, 'logout'])->name('auth.logout');

    // Forgot Password (Request Reset Link)
    Route::get('/forgot-password', [AuthController::class, 'forgot_password'])->name('forgot.password');
    Route::post('/forgot-password', [AuthController::class, 'send_reset_link'])->name('send.reset.link');

    // Reset Password
    Route::get('/reset-password/{token}', [AuthController::class, 'password_reset'])->name('password.reset');
    Route::post('/reset-password', [AuthController::class, 'update_password'])->name('update.password');
});


/*Storage Routes*/
